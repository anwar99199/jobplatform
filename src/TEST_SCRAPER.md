# ๐งช ุฏููู ุงุฎุชุจุงุฑ ูุธุงู ุฌูุจ ุงููุธุงุฆู
# Job Scraper Testing Guide

## โ Checklist ุงูุงุฎุชุจุงุฑ

ุงุณุชุฎุฏู ูุฐุง ุงูุฏููู ููุชุฃูุฏ ูู ุฃู ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ.

---

## 1๏ธโฃ ุงุฎุชุจุงุฑ Backend

### ุงุฎุชุจุงุฑ ูุจุงุดุฑ ุจุงุณุชุฎุฏุงู curl:

```bash
curl -X POST \
  https://YOUR_PROJECT_ID.supabase.co/functions/v1/make-server-8a20c00b/admin/scrape-jobs \
  -H "Content-Type: application/json" \
  -H "X-Admin-Token: YOUR_ADMIN_TOKEN" \
  -d '{"sourceUrl": "https://jobsofoman.com/ar/index.php"}' \
  -v
```

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:

```json
{
  "success": true,
  "message": "ุชู ุฌูุจ ูุฅุถุงูุฉ X ูุธููุฉ ุฌุฏูุฏุฉ ุจูุฌุงุญ",
  "jobsScraped": 45,
  "jobsAdded": 12,
  "jobs": [
    {
      "id": "...",
      "title": "...",
      "description": "...",
      "applicationUrl": "...",
      "date": "2024-12-16"
    }
  ]
}
```

### โ ูุฌุญ ุงูุงุฎุชุจุงุฑ ุฅุฐุง:
- [ ] HTTP Status: 200
- [ ] `success: true`
- [ ] `jobsScraped` > 0
- [ ] ุงููุธุงุฆู ุธูุฑุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### โ ูุดู ุงูุงุฎุชุจุงุฑ ุฅุฐุง:
- [ ] HTTP Status: 4xx ุฃู 5xx
- [ ] `success: false`
- [ ] ุฑุณุงูุฉ ุฎุทุฃ ูู console

---

## 2๏ธโฃ ุงุฎุชุจุงุฑ Frontend

### ุงูุฎุทูุงุช:

1. **ุชุณุฌูู ุงูุฏุฎูู:**
   - ุงูุชุญ `https://your-domain.com/admin/login`
   - ุณุฌู ุฏุฎูู ุจุญุณุงุจ admin ุตุญูุญ
   - ุชุฃูุฏ ูู ูุฌุงุญ ุชุณุฌูู ุงูุฏุฎูู

2. **ุงููุตูู ูุตูุญุฉ Scraper:**
   - ุงุฐูุจ ุฅูู ููุญุฉ ุงูุชุญูู
   - ุงุจุญุซ ุนู ุจุทุงูุฉ "ุฌูุจ ุงููุธุงุฆู ุชููุงุฆูุงู"
   - ุงุถุบุท ุนูููุง
   - ูุฌุจ ุฃู ุชูุชุญ ุตูุญุฉ `/admin/scraper`

3. **ุชุดุบูู ุนูููุฉ ุงูุฌูุจ:**
   - ุงุถุบุท ุนูู ุฒุฑ "ุฌูุจ ุงููุธุงุฆู ุงูุขู"
   - ูุฌุจ ุฃู ูุธูุฑ spinner "ุฌุงุฑู ุฌูุจ ุงููุธุงุฆู..."
   - ุงูุชุธุฑ ุญุชู ุชูุชูู ุงูุนูููุฉ (15-60 ุซุงููุฉ)

4. **ูุฑุงุฌุนุฉ ุงููุชุงุฆุฌ:**
   - ูุฌุจ ุฃู ุชุธูุฑ ุจุทุงูุฉ "ูุชูุฌุฉ ุขุฎุฑ ุนูููุฉ ุฌูุจ"
   - ุชุญูู ูู ุงูุฅุญุตุงุฆูุงุช:
     - ุงููุธุงุฆู ุงููุณุชุฎุฑุฌุฉ
     - ุงููุธุงุฆู ุงููุถุงูุฉ
     - ุงููุธุงุฆู ุงูููุฑุฑุฉ
   - ุฑุงุฌุน ูุงุฆูุฉ ุงููุธุงุฆู ุงููุถุงูุฉ

### โ ูุฌุญ ุงูุงุฎุชุจุงุฑ ุฅุฐุง:
- [ ] ุงูุตูุญุฉ ุชูุชุญ ุจุฏูู ุฃุฎุทุงุก
- [ ] ุงูุฒุฑ ูุนูู
- [ ] ุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ (toast)
- [ ] ุงููุชุงุฆุฌ ุชุนุฑุถ ุจุดูู ุตุญูุญ
- [ ] ุงููุธุงุฆู ุชุธูุฑ ูู ุงููุงุฆูุฉ

### โ ูุดู ุงูุงุฎุชุจุงุฑ ุฅุฐุง:
- [ ] ุฎุทุฃ 404 ุนูุฏ ูุชุญ ุงูุตูุญุฉ
- [ ] ุงูุฒุฑ ูุง ูุนูู
- [ ] ุฑุณุงูุฉ ุฎุทุฃ
- [ ] ูุง ุชุธูุฑ ูุชุงุฆุฌ

---

## 3๏ธโฃ ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุชุญูู ูู ุงููุธุงุฆู ูู Supabase:

1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู Table Editor
3. ุงูุชุญ ุฌุฏูู `jobs`
4. ุชุญูู ูู ูุฌูุฏ ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ:
   - ุชุงุฑูุฎ ุงูููู ูู ุนููุฏ `date`
   - ุนููุงู ููุตู ุจุงููุบุฉ ุงูุนุฑุจูุฉ
   - ุฑุงุจุท ุชูุฏูู ุตุญูุญ

### SQL Query ููุชุญูู:

```sql
-- ุงููุธุงุฆู ุงููุถุงูุฉ ุงูููู
SELECT 
  id, 
  title, 
  date, 
  application_url,
  created_at
FROM jobs
WHERE date = CURRENT_DATE
ORDER BY created_at DESC;

-- ุฅุญุตุงุฆูุงุช ุงููุธุงุฆู
SELECT 
  DATE(created_at) as added_date,
  COUNT(*) as jobs_count
FROM jobs
WHERE created_at >= NOW() - INTERVAL '7 days'
GROUP BY DATE(created_at)
ORDER BY added_date DESC;
```

### โ ูุฌุญ ุงูุงุฎุชุจุงุฑ ุฅุฐุง:
- [ ] ุงููุธุงุฆู ููุฌูุฏุฉ ูู ุงูุฌุฏูู
- [ ] ุงูุจูุงูุงุช ุตุญูุญุฉ ููุงููุฉ
- [ ] ูุง ุชูุฌุฏ ูุธุงุฆู ููุฑุฑุฉ
- [ ] ุงูุชูุงุฑูุฎ ุตุญูุญุฉ

---

## 4๏ธโฃ ุงุฎุชุจุงุฑ ุชุฌูุจ ุงูุชูุฑุงุฑ

### ุงูุฎุทูุงุช:

1. ูู ุจุชุดุบูู ุนูููุฉ ุงูุฌูุจ ูุฑุฉ ุฃููู
2. ุงุญูุธ ุนุฏุฏ ุงููุธุงุฆู ุงููุถุงูุฉ (ูุซูุงู: 12)
3. ูู ุจุชุดุบูู ุงูุนูููุฉ ูุฑุฉ ุซุงููุฉ ููุฑุงู
4. ุชุญูู ูู ุงููุชูุฌุฉ

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:

```
ุงููุฑุฉ ุงูุฃููู:
- ุงููุธุงุฆู ุงููุณุชุฎุฑุฌุฉ: 45
- ุงููุธุงุฆู ุงููุถุงูุฉ: 12
- ุงููุธุงุฆู ุงูููุฑุฑุฉ: 33

ุงููุฑุฉ ุงูุซุงููุฉ (ููุฑุงู):
- ุงููุธุงุฆู ุงููุณุชุฎุฑุฌุฉ: 45
- ุงููุธุงุฆู ุงููุถุงูุฉ: 0
- ุงููุธุงุฆู ุงูููุฑุฑุฉ: 45
```

### โ ูุฌุญ ุงูุงุฎุชุจุงุฑ ุฅุฐุง:
- [ ] ุงููุฑุฉ ุงูุซุงููุฉ: `jobsAdded = 0`
- [ ] ุฑุณุงูุฉ: "ุฌููุน ุงููุธุงุฆู ููุฌูุฏุฉ ุจุงููุนู"
- [ ] ูุง ุชูุฌุฏ ูุธุงุฆู ููุฑุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## 5๏ธโฃ ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุญุงูุฉ ุงูุงุฎุชุจุงุฑ 1: URL ุฎุงุทุฆ

```bash
curl -X POST \
  https://YOUR_PROJECT_ID.supabase.co/functions/v1/make-server-8a20c00b/admin/scrape-jobs \
  -H "Content-Type: application/json" \
  -d '{"sourceUrl": "https://invalid-website-xyz.com"}'
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "success": false,
  "message": "Scraping not supported for URL: ...",
  "jobsScraped": 0,
  "jobsAdded": 0
}
```

### ุญุงูุฉ ุงูุงุฎุชุจุงุฑ 2: ุจุฏูู Admin Token

```bash
curl -X POST \
  https://YOUR_PROJECT_ID.supabase.co/functions/v1/make-server-8a20c00b/admin/scrape-jobs \
  -H "Content-Type: application/json"
```

**ุงููุชูุฌุฉ:** ูุฌุจ ุฃู ูุนูู (ูุง ููุฌุฏ auth middleware ุตุงุฑู ุญุงููุงู)

### ุญุงูุฉ ุงูุงุฎุชุจุงุฑ 3: ูููุน ูุง ูุณุชุฌูุจ

ุณููุดู ุจุนุฏ 30 ุซุงููุฉ (timeout):
```json
{
  "success": false,
  "message": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงููุธุงุฆู ูู ุงููููุน",
  "error": "..."
}
```

---

## 6๏ธโฃ ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก

### ููุงุณ ุงูููุช:

```javascript
// ูู console ุงููุชุตูุญ
console.time('scrape');
await scrapeJobs();
console.timeEnd('scrape');
```

### ุงููุนุงููุฑ ุงููุชููุนุฉ:

| ุงูุนูููุฉ | ุงูููุช ุงููุชููุน |
|---------|----------------|
| Fetch HTML | 2-5 ุซูุงูู |
| Parse & Extract | 1-3 ุซูุงูู |
| Database Check | 0.5-1 ุซุงููุฉ |
| Insert Jobs | 0.5-2 ุซุงููุฉ |
| **ุงูุฅุฌูุงูู** | **5-15 ุซุงููุฉ** |

### โ ุงูุฃุฏุงุก ุฌูุฏ ุฅุฐุง:
- [ ] ุงูููุช ุงูุฅุฌูุงูู < 30 ุซุงููุฉ
- [ ] ูุง ุชูุฌุฏ timeouts
- [ ] ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ูุนุชุฏู

### โ๏ธ ุงูุฃุฏุงุก ูุญุชุงุฌ ุชุญุณูู ุฅุฐุง:
- [ ] ุงูููุช > 60 ุซุงููุฉ
- [ ] Timeout errors ูุชูุฑุฑุฉ
- [ ] High memory usage

---

## 7๏ธโฃ ุงุฎุชุจุงุฑ ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ

### ูุงุฎุชุจุงุฑ Cron Job:

1. ุฃูุดุฆ cron job ูู cron-job.org
2. ุงุถุจุท ุงูุชูููุช ุนูู "ูู 5 ุฏูุงุฆู" ููุงุฎุชุจุงุฑ
3. ุงูุชุธุฑ 5 ุฏูุงุฆู
4. ุชุญูู ูู:
   - Execution History ูู cron-job.org
   - ุฌุฏูู jobs ูู Supabase
   - Console logs

### ูุงุฎุชุจุงุฑ GitHub Actions:

1. ุฃูุดุฆ workflow ูุน `workflow_dispatch`
2. ุงุฐูุจ ุฅูู Actions tab
3. ุงุถุบุท ุนูู "Run workflow"
4. ุงูุชุธุฑ ุงูุชูุงู ุงูุชุดุบูู
5. ุฑุงุฌุน logs

### โ ูุฌุญ ุงูุงุฎุชุจุงุฑ ุฅุฐุง:
- [ ] ุงูุชุดุบูู ุงูุชููุงุฆู ูุนูู
- [ ] ุงููุธุงุฆู ุชุถุงู ุจูุฌุงุญ
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู logs
- [ ] ุงูุชูููุช ุฏููู

---

## ๐ ุณููุงุฑูููุงุช ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ 1: "ูู ูุชู ุงูุนุซูุฑ ุนูู ูุธุงุฆู"

**ุงููุญูุตุงุช:**
1. ุงูุชุญ https://jobsofoman.com/ar/index.php ูู ุงููุชุตูุญ
2. ุชุญูู ูู ุฃู ุงููููุน ูุนูู
3. ุงูุญุต ุจููุฉ HTML (Developer Tools)
4. ุชุญูู ูู selectors ูู `job-scraper.tsx`

**ุงูุญู:**
```typescript
// ูู job-scraper.tsxุ ุฃุถู/ุนุฏูู selectors
const possibleSelectors = [
  '.new-job-class',  // selector ุฌุฏูุฏ
  // ... selectors ููุฌูุฏุฉ
];
```

### ุงููุดููุฉ 2: ูุธุงุฆู ุบูุฑ ุตุญูุญุฉ

**ุงููุญูุตุงุช:**
1. ุฑุงุฌุน ุงููุธุงุฆู ุงููุถุงูุฉ
2. ุชุญูู ูู ุฌูุฏุฉ ุงูุจูุงูุงุช
3. ุงูุญุต ุงูุนูุงููู ูุงูุฃูุตุงู

**ุงูุญู:**
```typescript
// ุชุญุณูู filtering
if (title.length < 10 || title.length > 200) continue;
if (!description || description.length < 20) continue;
```

### ุงููุดููุฉ 3: ุฃุฎุทุงุก ูุชูุฑุฑุฉ

**ุงููุญูุตุงุช:**
1. ุฑุงุฌุน error logs
2. ุชุญูู ูู Supabase status
3. ูุญุต network connectivity

**ุงูุญู:**
- ุฅุนุงุฏุฉ ุงููุญุงููุฉ
- ุชุญุฏูุซ dependencies
- ุงูุชูุงุตู ูุน Supabase support

---

## ๐ ุชูุฑูุฑ ุงูุงุฎุชุจุงุฑ ุงูููุงุฆู

ุงุณุชุฎุฏู ูุฐุง ุงููุงูุจ ูุชูุซูู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ:

```
# ุชูุฑูุฑ ุงุฎุชุจุงุฑ ูุธุงู ุฌูุจ ุงููุธุงุฆู
ุงูุชุงุฑูุฎ: _________________
ุงููุฎุชุจุฑ: _________________

## ุงููุชุงุฆุฌ:

### Backend:
- [ ] โ ูุนูู ุจุดูู ุตุญูุญ
- [ ] โ๏ธ ูุนูู ูุน ูุดุงูู ุจุณูุทุฉ
- [ ] โ ูุง ูุนูู

### Frontend:
- [ ] โ ูุนูู ุจุดูู ุตุญูุญ
- [ ] โ๏ธ ูุนูู ูุน ูุดุงูู ุจุณูุทุฉ
- [ ] โ ูุง ูุนูู

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- [ ] โ ุงูุจูุงูุงุช ุตุญูุญุฉ ูููุชููุฉ
- [ ] โ๏ธ ุจุนุถ ุงููุดุงูู ูู ุงูุจูุงูุงุช
- [ ] โ ูุดุงูู ูุจูุฑุฉ

### ุชุฌูุจ ุงูุชูุฑุงุฑ:
- [ ] โ ูุนูู ุชูุงูุงู
- [ ] โ๏ธ ุจุนุถ ุงูุชูุฑุงุฑุงุช
- [ ] โ ูุง ูุนูู

### ุงูุฃุฏุงุก:
ุงูููุช ุงููุชูุณุท: ______ ุซุงููุฉ
- [ ] โ ููุชุงุฒ (< 15 ุซุงููุฉ)
- [ ] โ๏ธ ููุจูู (15-30 ุซุงููุฉ)
- [ ] โ ุจุทูุก (> 30 ุซุงููุฉ)

### ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ:
- [ ] โ ุชู ุงูุงุฎุชุจุงุฑ ูุชุนูู
- [ ] โณ ูู ูุชู ุงูุงุฎุชุจุงุฑ ุจุนุฏ
- [ ] โ ูุง ุชุนูู

## ุงูููุงุญุธุงุช:
_________________________________
_________________________________
_________________________________

## ุงููุดุงูู ุงูููุชุดูุฉ:
1. _______________________________
2. _______________________________
3. _______________________________

## ุงูุชูุตูุงุช:
1. _______________________________
2. _______________________________
3. _______________________________

## ุงูุฎูุงุตุฉ:
- [ ] โ ุงููุธุงู ุฌุงูุฒ ููุฅูุชุงุฌ
- [ ] โ๏ธ ูุญุชุงุฌ ุชุญุณููุงุช ุจุณูุทุฉ
- [ ] โ ูุญุชุงุฌ ุฅุตูุงุญุงุช ูุจูุฑุฉ
```

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุจุนุฏ ุงูุงุฎุชุจุงุฑ

ุฅุฐุง ูุฌุญุช ุฌููุน ุงูุงุฎุชุจุงุฑุงุช:
1. โ ูุนูู ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ
2. โ ุฑุงูุจ ุงูุฃุฏุงุก ููุฏุฉ ุฃุณุจูุน
3. โ ุงุถุจุท ุงูุชูููุช ุญุณุจ ุงูุญุงุฌุฉ
4. โ ูุซูู ุฃู ููุงุญุธุงุช

ุฅุฐุง ูุดูุช ุจุนุถ ุงูุงุฎุชุจุงุฑุงุช:
1. โ ุญุฏุฏ ุงููุดููุฉ ุจุฏูุฉ
2. โ ุฑุงุฌุน documentation
3. โ ุฃุตูุญ ุงูุฃุฎุทุงุก
4. โ ุฃุนุฏ ุงูุงุฎุชุจุงุฑ

---

**ููุงุญุธุฉ:** ุงุญุชูุธ ุจูุณุฎุฉ ูู ูุฐุง ุงูุชูุฑูุฑ ููู ุนูููุฉ ุงุฎุชุจุงุฑ ููููุงุฑูุฉ ูุงูุชุชุจุน.

๐ **ุญุธุงู ููููุงู ูู ุงูุงุฎุชุจุงุฑ!**
