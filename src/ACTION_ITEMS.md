# โ ูุงุฆูุฉ ุงูููุงู - ูุง ูุฌุจ ุนููู ูุนูู ุงูุขู

## ๐ฏ ุงููุฏู
ุชุดุบูู ูุธุงู ุฌูุจ ุงููุธุงุฆู ุงูุชููุงุฆู ุจูุฌุงุญ

---

## ๐ ุงูููุงู ุงูุฅูุฒุงููุฉ

### โ ุงููููุฉ 1: ุงุฎุชุจุงุฑ ุงููุธุงู ูุฏููุงู (5 ุฏูุงุฆู)

**ุงูุฎุทูุงุช:**

1. ุงูุชุญ ูููุนู ูุณุฌู ุฏุฎูู ูู Admin
   ```
   URL: YOUR_DOMAIN/admin/login
   ```

2. ูู ููุญุฉ ุงูุชุญููุ ุงุถุบุท ุนูู ุจุทุงูุฉ:
   ```
   "ุฌูุจ ุงููุธุงุฆู ุชููุงุฆูุงู"
   ```
   ุฃู ุงุฐูุจ ูุจุงุดุฑุฉ ุฅูู:
   ```
   YOUR_DOMAIN/admin/scraper
   ```

3. ุงุถุบุท ุนูู ุงูุฒุฑ ุงูุฃุฒุฑู:
   ```
   "ุฌูุจ ุงููุธุงุฆู ุงูุขู"
   ```

4. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
   - โ ุฑุณุงูุฉ ูุฌุงุญ ุจุงูููู ุงูุฃุฎุถุฑ
   - โ ุนุฑุถ ุนุฏุฏ ุงููุธุงุฆู ุงููุณุชุฎุฑุฌุฉ (ูุซูุงู: 15 ูุธููุฉ)
   - โ ุนุฑุถ ุนุฏุฏ ุงููุธุงุฆู ุงููุถุงูุฉ (ูุซูุงู: 15 ูุธููุฉ ุฌุฏูุฏุฉ)
   - โ ูุงุฆูุฉ ุจุงููุธุงุฆู ุงููุถุงูุฉ

5. **ุงูุชุญูู:**
   - ุงุฐูุจ ุฅูู `/admin/jobs`
   - ูุฌุจ ุฃู ุชุฑู ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ

**ุฅุฐุง ูุฌุญ ุงูุงุฎุชุจุงุฑ โ ุงูุชูู ูููููุฉ 2 โ**  
**ุฅุฐุง ูุดู โ ุฑุงุฌุน ูุณู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ุฃุฏูุงู โฌ๏ธ**

---

### โ ุงููููุฉ 2: ุฌุฏููุฉ ุงูุฌูุจ ุงูุชููุงุฆู (15 ุฏูููุฉ)

**ุงุฎุชุฑ ูุงุญุฏุฉ ูู ุงูุทุฑููุชูู:**

#### ุงูุฎูุงุฑ A: Cron-Job.org (ุงูุฃุณูู โญ)

**ุงูุฎุทูุฉ 1: ุงูุชุณุฌูู**
```
1. ุงุฐูุจ ุฅูู: https://cron-job.org/en/signup/
2. ุฃูุดุฆ ุญุณุงุจ ูุฌุงูู (ุจุงูุฅูููู)
3. ูุนูู ุงูุญุณุงุจ ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
```

**ุงูุฎุทูุฉ 2: ุงูุญุตูู ุนูู ุงููุนูููุงุช ุงููุทููุจุฉ**

ุงูุชุญ ูููุนู ูุงุชุจุน ูุฐู ุงูุฎุทูุงุช:

1. **ููุญุตูู ุนูู PROJECT_ID:**
   ```
   - ุงูุชุญ Supabase Dashboard
   - Project Settings โ API
   - ุงูุณุฎ "Project URL" (ุงูุฌุฒุก ูุจู .supabase.co)
   
   ูุซุงู: https://abcdefgh12345.supabase.co
   PROJECT_ID = abcdefgh12345
   ```

2. **ููุญุตูู ุนูู SUPABASE_ANON_KEY:**
   ```
   - ูู ููุณ ุงูุตูุญุฉ (Project Settings โ API)
   - ุงูุณุฎ "anon" key ูู "Project API keys"
   ```

3. **ููุญุตูู ุนูู ADMIN_TOKEN:**
   ```
   - ุณุฌู ุฏุฎูู ูู Admin ูู ูููุนู
   - ุงูุชุญ Console ูู ุงููุชุตูุญ (F12)
   - ุงูุชุจ: localStorage.getItem('adminToken')
   - ุงูุณุฎ ุงููููุฉ (ุจุฏูู ุนูุงูุงุช ุงูุชูุตูุต)
   ```

**ุงูุฎุทูุฉ 3: ุฅูุดุงุก Cron Job**

ูู cron-job.org:

```
1. ุงุถุบุท "Create cronjob"

2. ุงููุฃ ุงูุญููู:
   
   Title: Scrape Jobs of Oman
   
   Address (URL):
   https://YOUR_PROJECT_ID.supabase.co/functions/v1/make-server-8a20c00b/admin/scrape-jobs
   
   (ุงุณุชุจุฏู YOUR_PROJECT_ID ุจุงููููุฉ ุงููุนููุฉ)

3. ุงุถุบุท ุนูู Advanced:
   
   Request method: POST
   
   Request headers:
   Content-Type: application/json
   Authorization: Bearer YOUR_SUPABASE_ANON_KEY
   X-Admin-Token: YOUR_ADMIN_TOKEN
   
   (ุงุณุชุจุฏู ุงูููู ุงููุนููุฉ)
   
   Request body:
   {"sourceUrl": "https://jobsofoman.com/ar/index.php"}

4. Schedule:
   
   - ุงุฎุชุฑ: Every 6 hours
   ุฃู
   - ุงุฎุชุฑ: Once a day at 8:00 AM

5. Notification:
   - ูุนูู "Enable failure notifications" (ุงุฎุชูุงุฑู)

6. ุงุถุบุท "Create cronjob"
```

**ุงูุฎุทูุฉ 4: ุงูุชูุนูู**
```
1. ุงุฑุฌุน ููุงุฆูุฉ Cron Jobs
2. ุชุฃูุฏ ุฃู ุงูู Job ููุนูู (Enable)
3. ุฌุฑุจ "Run now" ููุชุฃูุฏ ูู ุนููู
```

**โ ุชู! ุงูุขู ุงููุธุงู ุณูุนูู ุชููุงุฆูุงู ุญุณุจ ุงูุฌุฏูู**

---

#### ุงูุฎูุงุฑ B: GitHub Actions (ูุชูุฏู)

**ูุชุทูุจุงุช:**
- ุญุณุงุจ GitHub
- ูุนุฑูุฉ ุฃุณุงุณูุฉ ุจู Git

**ุงูุฎุทูุงุช:**

1. **ุฅูุดุงุก Repository:**
   ```bash
   # ูู GitHubุ ุฃูุดุฆ repository ุฌุฏูุฏ
   ุงุณู Repository: oman-jobs-scraper
   Privacy: Private (ููู ููุฃูุงู)
   ```

2. **ุฅูุดุงุก ุงููููุงุช:**
   ```bash
   # ุฃูุดุฆ ุงููุฌูุฏุงุช ูุงููููุงุช:
   .github/
     workflows/
       scrape-jobs.yml
   ```

3. **ูุญุชูู scrape-jobs.yml:**
   ```yaml
   name: Scrape Jobs
   
   on:
     schedule:
       - cron: '0 */6 * * *'  # ูู 6 ุณุงุนุงุช
     workflow_dispatch:  # ุชุดุบูู ูุฏูู
   
   jobs:
     scrape:
       runs-on: ubuntu-latest
       steps:
         - name: Scrape Jobs
           run: |
             curl -X POST \
               https://${{ secrets.PROJECT_ID }}.supabase.co/functions/v1/make-server-8a20c00b/admin/scrape-jobs \
               -H "Content-Type: application/json" \
               -H "Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}" \
               -H "X-Admin-Token: ${{ secrets.ADMIN_TOKEN }}" \
               -d '{"sourceUrl": "https://jobsofoman.com/ar/index.php"}'
   ```

4. **ุฅุถุงูุฉ Secrets:**
   ```
   Repository โ Settings โ Secrets โ Actions
   
   ุฃุถู:
   - PROJECT_ID
   - SUPABASE_ANON_KEY
   - ADMIN_TOKEN
   ```

5. **ุงูุชุดุบูู:**
   ```
   Actions โ Scrape Jobs โ Run workflow
   ```

**โ ุชู! ุงูุขู ุณูุนูู ุชููุงุฆูุงู**

---

## ๐ ุงููููุฉ 3: ุงููุฑุงูุจุฉ ูุงูุชุญูู (ููููุงู)

### ุงูุฃุณุจูุน ุงูุฃูู:

**ููููุงู:**
```
โก ุงูุญุต `/admin/scraper` - ุดุงูุฏ ุขุฎุฑ ูุชูุฌุฉ
โก ุงูุญุต `/admin/jobs` - ุชุญูู ูู ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ
โก ุฑุงุฌุน Logs ูู Supabase (Functions โ Logs)
```

**ุฅุฐุง ุฑุฃูุช:**
- โ ูุธุงุฆู ุฌุฏูุฏุฉ ุชูุถุงู โ ูู ุดูุก ูุนูู ุจุดูู ููุชุงุฒ
- โ๏ธ "ุฌููุน ุงููุธุงุฆู ููุฌูุฏุฉ ุจุงููุนู" โ ุทุจูุนู (ูุง ุชูุฌุฏ ูุธุงุฆู ุฌุฏูุฏุฉ)
- โ ุฃุฎุทุงุก โ ุฑุงุฌุน ูุณู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "ูุดู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ"

**ุงูุญู:**
```
1. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
2. ุชุญูู ุฃู Supabase Functions ุชุนูู:
   - Dashboard โ Functions โ Status
3. ุฌุฑุจ ุงูุงุฎุชุจุงุฑ ุงููุฏูู ูุฑุฉ ุฃุฎุฑู
```

---

### ุงููุดููุฉ: "ูู ูุชู ุงูุนุซูุฑ ุนูู ูุธุงุฆู"

**ุงูุญููู:**
```
1. ุงูุชุญ https://jobsofoman.com/ar/index.php ูู ุงููุชุตูุญ
   - ูู ุงููููุน ูุนููุ
   - ูู ุชูุฌุฏ ูุธุงุฆูุ

2. ุฅุฐุง ูุงู ุงููููุน ูุนูู:
   - ุฑุงุฌุน Logs ูู Supabase
   - ุงุจุญุซ ุนู "Found X job elements"
   - ูุฏ ูุญุชุงุฌ ุงููููุน ุชุญุฏูุซ ููู selectors

3. ุงููุณุงุนุฏุฉ:
   - ุฑุงุฌุน `/AUTO_SCRAPER_GUIDE.md`
   - ุฃู ุงุชุตู ุจุงูุฏุนู ุงูููู
```

---

### ุงููุดููุฉ: "Unauthorized"

**ุงูุญู:**
```
1. ุชุญูู ูู Admin Token:
   - ุณุฌู ุฏุฎูู Admin ูุฑุฉ ุฃุฎุฑู
   - ุงุญุตู ุนูู token ุฌุฏูุฏ
   - ุญุฏูุซ ูู Cron-Job.org

2. ุชุญูู ูู Supabase Key:
   - Dashboard โ Settings โ API
   - ุงูุณุฎ anon key ูุฑุฉ ุฃุฎุฑู
   - ุญุฏูุซ ูู Cron-Job.org
```

---

### ุงููุดููุฉ: Timeout

**ุงูุญู:**
```
1. ูู Cron-Job.org:
   - Advanced โ Execution timeout
   - ุฒุฏ ุฅูู 60 seconds

2. ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
   - ููู ุนุฏุฏ ุงููุธุงุฆู ูู ุงูููุฏ
   - ุฃู ุงุชุตู ุจุงูุฏุนู
```

---

## ๐ ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:

1. **ุฑุงุฌุน ุงูุชูุซูู:**
   - `/QUICK_START_SCRAPER.md` - ุฏููู ุณุฑูุน
   - `/AUTO_SCRAPER_GUIDE.md` - ุฏููู ุดุงูู
   - `/SCRAPER_UPDATE_CHANGELOG.md` - ุชูุงุตูู ุงูุชุญุฏูุซ

2. **ุงูุญุต Logs:**
   - Supabase Dashboard โ Functions โ Logs
   - Console ูู ุงููุชุตูุญ (F12)
   - Cron-Job.org โ History

3. **ูุนูููุงุช ูููุฏุฉ ููุฏุนู:**
   ```
   - ุฑุณุงูุฉ ุงูุฎุทุฃ ุงููุงููุฉ
   - ููุทุฉ ุดุงุดุฉ ููุฎุทุฃ
   - ุขุฎุฑ 10 ุฃุณุทุฑ ูู Logs
   - ูุง ูู ุงูุฎุทูุฉ ุงูุชู ูุดูุช
   ```

---

## โจ ููุงูุฃุฉ: ุชุญุณููุงุช ุงุฎุชูุงุฑูุฉ

ุจุนุฏ ูุฌุงุญ ุงูุชุดุบููุ ููููู:

### 1. ุฅุถุงูุฉ ูููุน ูุธุงุฆู ุขุฎุฑ
```
- ุนุฏูู `/supabase/functions/server/job-scraper.tsx`
- ุฃุถู ุฏุงูุฉ scraping ุฌุฏูุฏุฉ
- ุงุชุจุน ููุณ ุงูููุท ุงูููุฌูุฏ
```

### 2. ุชุฎุตูุต ุงูุฌุฏูู
```
- ูุฑุฉ ููููุงู ูู ุงูุตุจุงุญ ุงูุจุงูุฑ (6 AM)
- ุฃู ูู 12 ุณุงุนุฉ
- ุญุณุจ ุงุญุชูุงุฌู
```

### 3. ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช
```
- ูู cron-job.org: ูุนูู Email notifications
- ุฃู ุงุณุชุฎุฏู Webhook ูุฅุดุนุงุฑุงุช ูุฎุตุตุฉ
```

---

## ๐ ุงูุฎูุงุตุฉ

**ูุง ุชู ุฅูุฌุงุฒู:**
- โ ูุธุงู scraping ูุงูู
- โ ูุงุฌูุฉ Admin ุณููุฉ
- โ ุชูุซูู ุดุงูู
- โ ุฏุนู ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ

**ูุง ุนููู ูุนูู:**
1. โ ุงุฎุชุจุงุฑ ูุฏูู (5 ุฏูุงุฆู)
2. โ ุฅุนุฏุงุฏ Cron Job (15 ุฏูููุฉ)
3. โ ูุฑุงูุจุฉ ุฃุณุจูุน (5 ุฏูุงุฆู ููููุงู)

**ุจุนุฏ ุฐูู:**
- ๐ ุงุณุชูุชุน ุจูููุน ููุญุฏูุซ ููุณู ุชููุงุฆูุงู!
- ๐ ุฑูุฒ ุนูู ููุฒุงุช ุฃุฎุฑู
- ๐ฐ ุงุณุชูุชุน ุจุงููุฌุงุญ

---

## ๐ Timeline ุงูููุชุฑุญ

```
ุงูููู:
โก ุงููููุฉ 1: ุงุฎุชุจุงุฑ ูุฏูู (10 ุฏูุงุฆู)

ุงูููู ุฃู ุบุฏุงู:
โก ุงููููุฉ 2: ุฅุนุฏุงุฏ Cron Job (15 ุฏูููุฉ)

ุงูุฃุณุจูุน ุงูุฃูู:
โก ุงููููุฉ 3: ูุฑุงูุจุฉ ููููุฉ (5 ุฏูุงุฆู/ููู)

ุจุนุฏ ุฃุณุจูุน:
โ ุงููุธุงู ูุนูู ุชููุงุฆูุงู ุจุฏูู ุชุฏุฎู!
```

---

**ุญุธุงู ููููุงู! ๐**

ุฅุฐุง ุงุญุชุฌุช ุฃู ูุณุงุนุฏุฉุ ุฑุงุฌุน ุงููููุงุช ุงูุชูุซูููุฉ ุฃู Logs.

---

**ุขุฎุฑ ุชุญุฏูุซ:** ุฏูุณูุจุฑ 2024  
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุชูููุฐ
