# ูุธุงู ุงููุตุงุฏูุฉ - ูุธุงุฆู ุนููุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุจูุงุก ูุธุงู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู **Supabase Auth** ุงูุญูููู ูุน ุชุฎุฒูู ุฅุถุงูู ูู **KV Store** ูููููุงุช ุงูุดุฎุตูุฉ.

---

## ๐ ููููุฉ ุนูู ุงููุธุงู

### 1. **ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ (Sign Up)**

**ุงููุณุงุฑ:** `/register`

**ูุง ูุญุฏุซ ุฎูู ุงูููุงููุณ:**
1. ุงููุณุชุฎุฏู ูุฏุฎู: ุงูุงุณูุ ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ูููุฉ ุงููุฑูุฑ
2. ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู: `/make-server-8a20c00b/signup`
3. Server ูููู ุจู:
   - โ ุฅูุดุงุก ุงููุณุชุฎุฏู ูู **Supabase Auth** (ุฌุฏูู `auth.users`)
   - โ ุชุฃููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุชููุงุฆูุงู
   - โ ุญูุธ profile ุฅุถุงูู ูู **KV Store** ุจููุชุงุญ `user_profile:{userId}`
4. ุชุณุฌูู ุฏุฎูู ุชููุงุฆู ูููุณุชุฎุฏู

**ุงูุจูุงูุงุช ุงููุฎุฒูุฉ:**
```json
// ูู Supabase Auth (auth.users)
{
  "id": "uuid",
  "email": "user@example.com",
  "user_metadata": {
    "name": "ุงุณู ุงููุณุชุฎุฏู"
  }
}

// ูู KV Store (user_profile:uuid)
{
  "id": "uuid",
  "email": "user@example.com",
  "name": "ุงุณู ุงููุณุชุฎุฏู",
  "createdAt": "2025-11-08T...",
  "role": "user"
}
```

---

### 2. **ุชุณุฌูู ุงูุฏุฎูู (Login)**

**ุงููุณุงุฑ:** `/login`

**ูุง ูุญุฏุซ:**
1. ุงููุณุชุฎุฏู ูุฏุฎู: ุงูุจุฑูุฏุ ูููุฉ ุงููุฑูุฑ
2. ูุชู ุงููุตุงุฏูุฉ ูุจุงุดุฑุฉ ูุน **Supabase Auth** ูู Frontend
3. ุนูุฏ ุงููุฌุงุญ:
   - โ ุญูุธ `access_token` ูู localStorage
   - โ ุญูุธ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู localStorage
   - โ ุงูุชูุฌู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ

---

### 3. **ุนุฑุถ ุญุงูุฉ ุงููุณุชุฎุฏู ูู Header**

- ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู: ูุธูุฑ ุงุณูู + ุฒุฑ ุชุณุฌูู ุฎุฑูุฌ
- ุฅุฐุง ูู ููู ูุณุฌู: ูุธูุฑ "ุชุณุฌูู ุงูุฏุฎูู" + "ุฅูุดุงุก ุญุณุงุจ"

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### โ ูุง ูู ููุฌูุฏ:

1. **Supabase Auth (ูุฏูุฌ):**
   - ุฌุฏูู `auth.users` - ููุฏุงุฑ ุชููุงุฆูุงู ุจูุงุณุทุฉ Supabase
   - ูุง ูุญุชุงุฌ ุฃู setup ุฅุถุงูู

2. **KV Store Table (`kv_store_8a20c00b`):**
   - ูุชุงุญุฉ ุจุงููุนู
   - ุชูุณุชุฎุฏู ูุชุฎุฒูู:
     - `user_profile:{userId}` - ูุนูููุงุช ุงููุณุชุฎุฏููู ุงูุฅุถุงููุฉ
     - `job:{jobId}` - ุงููุธุงุฆู
     - `admin:user` - ุจูุงูุงุช ุงููุฏูุฑ

---

## ๐ง API Endpoints

### ูููุณุชุฎุฏููู:

| Endpoint | Method | ุงููุตู |
|----------|--------|-------|
| `/make-server-8a20c00b/signup` | POST | ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ |
| `/make-server-8a20c00b/user/profile/:userId` | GET | ุฌูุจ profile ุงููุณุชุฎุฏู |

### ูููุฏูุฑูู:

| Endpoint | Method | ุงููุตู |
|----------|--------|-------|
| `/make-server-8a20c00b/admin/users` | GET | ุฌูุจ ุฌููุน ุงููุณุชุฎุฏููู |
| `/make-server-8a20c00b/admin/login` | POST | ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ |
| `/make-server-8a20c00b/admin/register` | POST | ุชุณุฌูู ุฃูู ูุฏูุฑ |

---

## โ๏ธ ูุงู: ุฎุทูุงุช ุงูุชุดุบูู

### ุฅุฐุง ูุงูุช ุงููุดููุฉ "404 Not Found":

1. **ุชุฃูุฏ ูู deploy ุงูู Edge Function:**
   - ุงุฐูุจ ุฅูู: [Supabase Dashboard](https://supabase.com/dashboard)
   - ุงูุชุญ ูุดุฑูุนู: `jvfaelfsmpigdeiypuic`
   - Edge Functions โ ุชุญูู ูู ูุฌูุฏ `make-server-8a20c00b`
   - ุฅุฐุง ูู ุชูู ููุฌูุฏุฉุ deploy ุงูู `/supabase/functions/server/` folder

2. **ุชุญูู ูู Console ูู ุงููุชุตูุญ (F12):**
   - ุดุงูุฏ ุฑุณุงุฆู ุงูุฎุทุฃ
   - ุชุญูู ูู ุงูู Network tab

3. **ุชุญูู ูู Environment Variables:**
   - `SUPABASE_URL` โ
   - `SUPABASE_SERVICE_ROLE_KEY` โ
   - `SUPABASE_ANON_KEY` โ

---

## ๐ฏ ุงูุฎูุงุตุฉ

- โ ุงููุธุงู ูุณุชุฎุฏู **ุจูุงูุงุช ุญููููุฉ** (Supabase Auth + KV Store)
- โ **ูุง ุญุงุฌุฉ ูุฅูุดุงุก ุฌุฏุงูู ุฌุฏูุฏุฉ** - ูู ุดูุก ุฌุงูุฒ
- โ ุงููุณุชุฎุฏููู ููุฎุฒููู ูู `auth.users` ุชููุงุฆูุงู
- โ Profiles ุฅุถุงููุฉ ูู KV Store
- โ๏ธ ุชุฃูุฏ ูู ุฃู Edge Function deployed

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

ุงูุชุญ Console (F12) ูุฃุฎุจุฑูู ุจุงูุฑุณุงูุฉ ุจุงูุถุจุท!
